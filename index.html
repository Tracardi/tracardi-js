<html>
    <head>
        <title>My title</title>
        <script>
            const options = {

                tracker: {
                    url: {
                        script: 'dist/tracker.js',
                        // api: 'http://localhost:8001'
                    },
                    source: {
                        id: "mobile-app"
                    },
                    init: {
                        mydata: "ddd"
                    }
                }
            }

            !function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).tracardi=e()}(function(){return function n(o,i,a){function c(r,e){if(!i[r]){if(!o[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(d)return d(r,!0);throw(t=new Error("Cannot find module '"+r+"'")).code="MODULE_NOT_FOUND",t}t=i[r]={exports:{}},o[r][0].call(t.exports,function(e){return c(o[r][1][e]||e)},t,t.exports,n,o,i,a)}return i[r].exports}for(var d="function"==typeof require&&require,e=0;e<a.length;e++)c(a[e]);return c}({1:[function(e,r,t){"use strict";window.tracker||(window.tracker={}),function(){for(var t=[],n="tracker.min.js",e=["track","page","identify"],r=0;r<e.length;r++){var o=e[r];window.tracker[o]=function(r){return function(){var e=Array.prototype.slice.call(arguments);return e.unshift(r),t.push(e),window.tracker}}(o)}function i(){if(console.debug("[Tracker] Rerun callbacks."),window.tracardi.default.getState().plugins["tracardi-plugin"].initialized)for(window.tracker=window.tracardi.default;0<t.length;){var e=t.shift(),r=e.shift();tracker[r]&&tracker[r].apply(tracker,e)}else console.error("[Tracardi] Callbacks stopped. Tracker not initialized.")}document.addEventListener("DOMContentLoaded",function(){var e,r=document.createElement("script");r.type="text/javascript",r.async=!0,void 0!==options.tracker||void 0!==options.tracker.url||void 0!==options.tracker.url.script?(null!==options.tracker.url.script?options.tracker.url.script.startsWith("http")?r.src=options.tracker.url.script+"/"+n:r.src=options.tracker.url.script:r.src=n,console.debug("[Tracker] Loading: "+r.src),r.addEventListener?r.addEventListener("load",function(e){i()},!1):r.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||i(window.event)},(e=document.getElementsByTagName("script")[0]).parentNode.insertBefore(r,e)):console.error("[Tracker] Undefined options.tracker.url.script. This url defines location of tracker code.")})}()},{}]},{},[1])(1)});

        </script>
        <script>
            window.tracker.page({"page":1})
            window.tracker.track("xxx1", {"a":1})
            window.tracker.track("xxx2", {"a":2})
            window.tracker.track("xxx3", {"a":3})
            window.tracker.identify("user-id-1", {"a":1})
            window.tracker.identify("user-id-2", {"a":2})
        </script>
    </head>
    <body>
        Test
        <a href="page.html?referrer=aaa">Page</a>
    </body>
</html>